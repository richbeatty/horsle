const fullscreenButton = document.getElementById("fullscreen-button");
const fullscreenIcon = fullscreenButton.querySelector("svg");

// Function to toggle fullscreen mode
function toggleFullscreen() {
  if (!document.fullscreenElement) {
    // Enter fullscreen mode
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    } else if (document.documentElement.mozRequestFullScreen) {
      document.documentElement.mozRequestFullScreen();
    } else if (document.documentElement.webkitRequestFullscreen) {
      document.documentElement.webkitRequestFullscreen();
    } else if (document.documentElement.msRequestFullscreen) {
      document.documentElement.msRequestFullscreen();
    }

    // Change icon to compress-arrows-alt
    fullscreenIcon.innerHTML = `<path d="M200 288H88c-21.4 0-32.1 25.8-17 41l32.9 31-99.2 99.3c-6.2 6.2-6.2 16.4 0 22.6l25.4 25.4c6.2 6.2 16.4 6.2 22.6 0L152 408l31.1 33c15.1 15.1 40.9 4.4 40.9-17V312c0-13.3-10.7-24-24-24zm112-64h112c21.4 0 32.1-25.9 17-41l-33-31 99.3-99.3c6.2-6.2 6.2-16.4 0-22.6L481.9 4.7c-6.2-6.2-16.4-6.2-22.6 0L360 104l-31.1-33C313.8 55.9 288 66.6 288 88v112c0 13.3 10.7 24 24 24zm96 136l33-31.1c15.1-15.1 4.4-40.9-17-40.9H312c-13.3 0-24 10.7-24 24v112c0 21.4 25.9 32.1 41 17l31-32.9 99.3 99.3c6.2 6.2 16.4 6.2 22.6 0l25.4-25.4c6.2-6.2 6.2-16.4 0-22.6L408 360zM183 71.1L152 104 52.7 4.7c-6.2-6.2-16.4-6.2-22.6 0L4.7 30.1c-6.2 6.2-6.2 16.4 0 22.6L104 152l-33 31.1C55.9 198.2 66.6 224 88 224h112c13.3 0 24-10.7 24-24V88c0-21.3-25.9-32-41-16.9z" />`;
  } else {
    // Exit fullscreen mode
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    }

    // Change icon to expand-arrows-alt
    fullscreenIcon.innerHTML = `<path d="M448 344v112a23.94 23.94 0 0 1-24 24H312c-21.39 0-32.09-25.9-17-41l36.2-36.2L224 295.6 116.77 402.9 153 439c15.09 15.1 4.39 41-17 41H24a23.94 23.94 0 0 1-24-24V344c0-21.4 25.89-32.1 41-17l36.19 36.2L184.46 256 77.18 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.94 23.94 0 0 1 24-24h112c21.39 0 32.09 25.9 17 41l-36.2 36.2L224 216.4l107.23-107.3L295 73c-15.09-15.1-4.39-41 17-41h112a23.94 23.94 0 0 1 24 24v112c0 21.4-25.89 32.1-41 17l-36.19-36.2L263.54 256l107.28 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z" />`;
  }
}

// Add click event listener to the fullscreen button
fullscreenButton.addEventListener("click", toggleFullscreen);

const toggleButton = document.getElementById("toggle-button");
const body = document.body;
const svgIcon = document.querySelector("#toggle-button svg");

toggleButton.addEventListener("click", function () {
  body.classList.toggle("dark-mode");
  if (body.classList.contains("dark-mode")) {
    svgIcon.style.fill = "#000"; // Set SVG color to black
  } else {
    svgIcon.style.fill = "#fff"; // Set SVG color to white
  }
});

const WORDS = [
"kiss", 
 "transportation", 
 "man", 
 "north", 
 "ground", 
 "math", 
 "count", 
 "junior", 
 "hook", 
 "ride", 
 "angle", 
 "master", 
 "blame", 
 "fun", 
 "order", 
 "industry", 
 "teach", 
 "relief", 
 "frame", 
 "wing", 
 "mission", 
 "unique", 
 "water", 
 "mention", 
 "kitchen", 
 "penalty", 
 "pack", 
 "upstairs", 
 "title", 
 "glass", 
 "candidate", 
 "taste", 
 "team", 
 "special", 
 "scheme", 
 "physical", 
 "clothes", 
 "assignment", 
 "half", 
 "book", 
 "bed", 
 "maximum", 
 "wheel", 
 "front", 
 "plant", 
 "suspect", 
 "brown", 
 "male", 
 "couple", 
 "guard", 
 "commission", 
 "knowledge", 
 "suck", 
 "policy", 
 "instruction", 
 "hand", 
 "secretary", 
 "skill", 
 "month", 
 "representative", 
 "championship", 
 "active", 
 "country", 
 "help", 
 "bake", 
 "amount", 
 "cabinet", 
 "shake", 
 "sale", 
 "land", 
 "iron", 
 "attempt", 
 "jacket", 
 "volume", 
 "death", 
 "fee", 
 "wash", 
 "appeal", 
 "queen", 
 "feature", 
 "nerve", 
 "delay", 
 "mix", 
 "neat", 
 "refuse", 
 "shop", 
 "pride", 
 "restaurant", 
 "clock", 
 "associate", 
 "cause", 
 "tea", 
 "wealth", 
 "note", 
 "prior", 
 "initiative", 
 "invite", 
 "meaning", 
 "role", 
 "king", 
 "gas", 
 "minimum", 
 "black", 
 "jump", 
 "bend", 
 "operation", 
 "ship", 
 "cell", 
 "hospital", 
 "lead", 
 "swing", 
 "stage", 
 "maintenance", 
 "watch", 
 "chicken", 
 "wine", 
 "personal", 
 "future", 
 "shock", 
 "load", 
 "organization", 
 "refrigerator", 
 "mirror", 
 "love", 
 "war", 
 "belt", 
 "fuel", 
 "mortgage", 
 "beach", 
 "wear", 
 "green", 
 "cycle", 
 "particular", 
 "company", 
 "view", 
 "track", 
 "shelter", 
 "radio", 
 "student", 
 "strain", 
 "seat", 
 "glove", 
 "form", 
 "regret", 
 "solid", 
 "pitch", 
 "silver", 
 "mess", 
 "newspaper", 
 "economy", 
 "situation", 
 "roll", 
 "funeral", 
 "expert", 
 "perception", 
 "tradition", 
 "passage", 
 "loan", 
 "location", 
 "deal", 
 "push", 
 "following", 
 "potato", 
 "boyfriend", 
 "ball", 
 "milk", 
 "elevator", 
 "golf", 
 "hearing", 
 "finish", 
 "project", 
 "arrival", 
 "coast", 
 "knife", 
 "son", 
 "writer", 
 "heart", 
 "contract", 
 "step", 
 "candle", 
 "opinion", 
 "voice", 
 "midnight", 
 "block", 
 "ask", 
 "reality", 
 "community", 
 "string", 
 "information", 
 "grass", 
 "world", 
 "improvement", 
 "subject", 
 "lip", 
 "upper", 
 "room", 
 "fly", 
 "professor", 
 "champion", 
 "entertainment", 
 "profession", 
 "tale", 
 "convert", 
 "repeat", 
 "hurt", 
 "quit", 
 "director", 
 "luck", 
 "rush", 
 "self", 
 "work", 
 "proposal", 
 "wake", 
 "primary", 
 "child", 
 "habit", 
 "scratch", 
 "muscle", 
 "truck", 
 "breast", 
 "literature", 
 "drunk", 
 "employee", 
 "tomorrow", 
 "sound", 
 "skin", 
 "dead", 
 "carry", 
 "cheek", 
 "break", 
 "interest", 
 "fish", 
 "singer", 
 "attention", 
 "patience", 
 "user", 
 "divide", 
 "desire", 
 "punch", 
 "stupid", 
 "peak", 
 "if", 
 "cable", 
 "white", 
 "simple", 
 "hold", 
 "university", 
 "dust", 
 "yellow", 
 "potential", 
 "plan", 
 "variety", 
 "value", 
 "database", 
 "trainer", 
 "screen", 
 "virus", 
 "mud", 
 "art", 
 "sense", 
 "treat", 
 "anywhere", 
 "tear", 
 "temperature", 
 "example", 
 "plate", 
 "sister", 
 "agreement", 
 "source", 
 "focus", 
 "editor", 
 "software", 
 "complaint", 
 "camp", 
 "promotion", 
 "spring", 
 "feedback", 
 "examination", 
 "drawing", 
 "extension", 
 "cap", 
 "dealer", 
 "debt", 
 "partner", 
 "increase", 
 "region", 
 "single", 
 "injury", 
 "guarantee", 
 "baby", 
 "god", 
 "hang", 
 "tennis", 
 "evidence", 
 "depression", 
 "leadership", 
 "broad", 
 "space", 
 "walk", 
 "competition", 
 "native", 
 "rough", 
 "crack", 
 "status", 
 "document", 
 "bike", 
 "click", 
 "writing", 
 "medium", 
 "permission", 
 "bottle", 
 "positive", 
 "society", 
 "fill", 
 "matter", 
 "instance", 
 "place", 
 "guitar", 
 "most", 
 "chip", 
 "study", 
 "advertising", 
 "historian", 
 "pollution", 
 "slide", 
 "advantage", 
 "working", 
 "let", 
 "error", 
 "entrance", 
 "familiar", 
 "channel", 
 "pull", 
 "respect", 
 "birth", 
 "garage", 
 "effort", 
 "suggestion", 
 "rule", 
 "question", 
 "site", 
 "it", 
 "silly", 
 "traffic", 
 "deep", 
 "stranger", 
 "reason", 
 "baseball", 
 "news", 
 "machine", 
 "high", 
 "excuse", 
 "group", 
 "bread", 
 "bid", 
 "judgment", 
 "search", 
 "lesson", 
 "present", 
 "power", 
 "spare", 
 "vacation", 
 "talk", 
 "teaching", 
 "ability", 
 "part", 
 "bedroom", 
 "sea", 
 "doubt", 
 "earth", 
 "item", 
 "fortune", 
 "action", 
 "weight", 
 "breath", 
 "buy", 
 "promise", 
 "library", 
 "star", 
 "significance", 
 "exam", 
 "alarm", 
 "anger", 
 "might", 
 "cook", 
 "movie", 
 "house", 
 "mobile", 
 "review", 
 "drink", 
 "speaker", 
 "drive", 
 "occasion", 
 "beautiful", 
 "ear", 
 "brief", 
 "selection", 
 "strategy", 
 "mate", 
 "smile", 
 "mouth", 
 "physics", 
 "conversation", 
 "quiet", 
 "comfort", 
 "network", 
 "face", 
 "insect", 
 "secret", 
 "position", 
 "pattern", 
 "dot", 
 "swimming", 
 "currency", 
 "outcome", 
 "leader", 
 "spot", 
 "holiday", 
 "conference", 
 "rich", 
 "train", 
 "setting", 
 "hotel", 
 "produce", 
 "tourist", 
 "contact", 
 "variation", 
 "hair", 
 "wedding", 
 "trash", 
 "try", 
 "harm", 
 "valuable", 
 "depth", 
 "gold", 
 "progress", 
 "system", 
 "practice", 
 "grab", 
 "estimate", 
 "towel", 
 "capital", 
 "technology", 
 "awareness", 
 "ruin", 
 "resource", 
 "housing", 
 "alternative", 
 "foundation", 
 "imagination", 
 "manner", 
 "map", 
 "song", 
 "background", 
 "guidance", 
 "permit", 
 "essay", 
 "spiritual", 
 "smell", 
 "mall", 
 "top", 
 "slice", 
 "calendar", 
 "party", 
 "health", 
 "structure", 
 "distance", 
 "culture", 
 "hello", 
 "object", 
 "coat", 
 "rate", 
 "regular", 
 "recover", 
 "deposit", 
 "general", 
 "claim", 
 "safety", 
 "international", 
 "communication", 
 "brain", 
 "discipline", 
 "worker", 
 "long", 
 "buyer", 
 "trip", 
 "complex", 
 "tooth", 
 "run", 
 "hire", 
 "shift", 
 "father", 
 "character", 
 "noise", 
 "boat", 
 "salary", 
 "normal", 
 "extreme", 
 "dimension", 
 "moment", 
 "version", 
 "energy", 
 "bag", 
 "charge", 
 "net", 
 "pension", 
 "comparison", 
 "employment", 
 "excitement", 
 "forever", 
 "tap", 
 "message", 
 "option", 
 "double", 
 "wave", 
 "motor", 
 "income", 
 "fruit", 
 "finding", 
 "proof", 
 "aspect", 
 "release", 
 "fault", 
 "class", 
 "still", 
 "set", 
 "menu", 
 "year", 
 "concept", 
 "reply", 
 "clue", 
 "teacher", 
 "resolution", 
 "serve", 
 "current", 
 "event", 
 "meeting", 
 "kid", 
 "program", 
 "bonus", 
 "being", 
 "profile", 
 "bet", 
 "bowl", 
 "truth", 
 "flow", 
 "responsibility", 
 "construction", 
 "office", 
 "tool", 
 "advice", 
 "winner", 
 "whole", 
 "actor", 
 "pleasure", 
 "author", 
 "score", 
 "nobody", 
 "fact", 
 "cold", 
 "request", 
 "battle", 
 "fear", 
 "march", 
 "session", 
 "kind", 
 "assist", 
 "travel", 
 "file", 
 "weekend", 
 "stuff", 
 "anything", 
 "pin", 
 "sort", 
 "plenty", 
 "survey", 
 "management", 
 "bar", 
 "raise", 
 "inspection", 
 "ticket", 
 "split", 
 "human", 
 "witness", 
 "offer", 
 "style", 
 "paper", 
 "result", 
 "size", 
 "meat", 
 "south", 
 "stand", 
 "kill", 
 "standard", 
 "print", 
 "assumption", 
 "hunt", 
 "estate", 
 "island", 
 "conflict", 
 "cup", 
 "control", 
 "word", 
 "lift", 
 "web", 
 "window", 
 "morning", 
 "guess", 
 "engineering", 
 "spray", 
 "garden", 
 "importance", 
 "second", 
 "property", 
 "preparation", 
 "experience", 
 "establishment", 
 "profit", 
 "army", 
 "revolution", 
 "great", 
 "degree", 
 "trick", 
 "loss", 
 "poem", 
 "good", 
 "freedom", 
 "phone", 
 "audience", 
 "honey", 
 "river", 
 "obligation", 
 "tell", 
 "a", 
 "pop", 
 "age", 
 "demand", 
 "payment", 
 "impression", 
 "cat", 
 "evening", 
 "call", 
 "lecture", 
 "damage", 
 "poetry", 
 "disaster", 
 "bug", 
 "station", 
 "meal", 
 "difference", 
 "pace", 
 "diet", 
 "leg", 
 "while", 
 "log", 
 "mail", 
 "cost", 
 "list", 
 "external", 
 "substance", 
 "design", 
 "mom", 
 "car", 
 "theme", 
 "thanks", 
 "product", 
 "fix", 
 "investment", 
 "term", 
 "ladder", 
 "negotiation", 
 "border", 
 "bear", 
 "gather", 
 "tough", 
 "celebration", 
 "boy", 
 "consist", 
 "branch", 
 "necessary", 
 "pick", 
 "exit", 
 "turn", 
 "committee", 
 "peace", 
 "buddy", 
 "stop", 
 "context", 
 "category", 
 "leading", 
 "desk", 
 "employ", 
 "credit", 
 "remote", 
 "debate", 
 "opposite", 
 "devil", 
 "strength", 
 "floor", 
 "post", 
 "confusion", 
 "type", 
 "ambition", 
 "introduction", 
 "president", 
 "horror", 
 "sweet", 
 "requirement", 
 "ad", 
 "problem", 
 "principle", 
 "tie", 
 "bad", 
 "classic", 
 "code", 
 "charity", 
 "personality", 
 "yard", 
 "gene", 
 "argument", 
 "appearance", 
 "annual", 
 "stomach", 
 "enthusiasm", 
 "reach", 
 "drag", 
 "layer", 
 "percentage", 
 "account", 
 "birthday", 
 "platform", 
 "crash", 
 "winter", 
 "anybody", 
 "election", 
 "combine", 
 "reveal", 
 "member", 
 "independence", 
 "end", 
 "failure", 
 "discount", 
 "tackle", 
 "fail", 
 "engineer", 
 "career", 
 "manager", 
 "patient", 
 "calm", 
 "poet", 
 "sell", 
 "lawyer", 
 "highway", 
 "childhood", 
 "bother", 
 "equipment", 
 "material", 
 "girl", 
 "farm", 
 "orange", 
 "government", 
 "mother", 
 "memory", 
 "table", 
 "effect", 
 "plane", 
 "person", 
 "dump", 
 "clerk", 
 "story", 
 "hole", 
 "media", 
 "bird", 
 "slip", 
 "magazine", 
 "counter", 
 "roof", 
 "guest", 
 "analysis", 
 "nothing", 
 "record", 
 "pound", 
 "priority", 
 "factor", 
 "emphasis", 
 "administration", 
 "mark", 
 "mixture", 
 "speech", 
 "stable", 
 "parking", 
 "surprise", 
 "agency", 
 "conclusion", 
 "designer", 
 "due", 
 "repair", 
 "distribution", 
 "catch", 
 "abroad", 
 "exchange", 
 "senior", 
 "crew", 
 "alcohol", 
 "weakness", 
 "relation", 
 "stock", 
 "young", 
 "price", 
 "fight", 
 "reference", 
 "page", 
 "cancer", 
 "path", 
 "creative", 
 "oven", 
 "snow", 
 "today", 
 "transition", 
 "egg", 
 "bridge", 
 "strip", 
 "remove", 
 "development", 
 "plastic", 
 "official", 
 "spread", 
 "husband", 
 "put", 
 "hate", 
 "till", 
 "mountain", 
 "interview", 
 "delivery", 
 "panic", 
 "measurement", 
 "raw", 
 "sandwich", 
 "period", 
 "grocery", 
 "chair", 
 "cut", 
 "case", 
 "emotion", 
 "telephone", 
 "national", 
 "beginning", 
 "light", 
 "button", 
 "tune", 
 "sensitive", 
 "cow", 
 "bitter", 
 "picture", 
 "lunch", 
 "affair", 
 "marriage", 
 "tip", 
 "big", 
 "ease", 
 "suit", 
 "pain", 
 "sink", 
 "computer", 
 "insurance", 
 "gift", 
 "relationship", 
 "job", 
 "quantity", 
 "text", 
 "care", 
 "influence", 
 "grandfather", 
 "lie", 
 "attack", 
 "studio", 
 "indication", 
 "possession", 
 "handle", 
 "football", 
 "nurse", 
 "basis", 
 "definition", 
 "replacement", 
 "departure", 
 "union", 
 "soil", 
 "maybe", 
 "safe", 
 "preference", 
 "public", 
 "consideration", 
 "minor", 
 "stick", 
 "scene", 
 "diamond", 
 "door", 
 "presentation", 
 "business", 
 "atmosphere", 
 "concert", 
 "knee", 
 "pool", 
 "inspector", 
 "time", 
 "aside", 
 "chest", 
 "throat", 
 "week", 
 "success", 
 "nail", 
 "blind", 
 "wonder", 
 "keep", 
 "bunch", 
 "drawer", 
 "film", 
 "process", 
 "trade", 
 "reaction", 
 "cross", 
 "money", 
 "tower", 
 "listen", 
 "theory", 
 "shopping", 
 "engine", 
 "tank", 
 "can", 
 "she", 
 "opportunity", 
 "cookie", 
 "homework", 
 "natural", 
 "funny", 
 "basket", 
 "round", 
 "night", 
 "western", 
 "fall", 
 "fire", 
 "storage", 
 "blue", 
 "glad", 
 "many", 
 "college", 
 "gear", 
 "switch", 
 "west", 
 "sector", 
 "boss", 
 "court", 
 "use", 
 "sex", 
 "respond", 
 "look", 
 "juice", 
 "sport", 
 "city", 
 "climate", 
 "friendship", 
 "reading", 
 "adult", 
 "purple", 
 "inflation", 
 "league", 
 "growth", 
 "state", 
 "resolve", 
 "spirit", 
 "screw", 
 "inside", 
 "lake", 
 "dig", 
 "signature", 
 "notice", 
 "outside", 
 "visit", 
 "shine", 
 "bell", 
 "oil", 
 "internet", 
 "line", 
 "carpet", 
 "return", 
 "pressure", 
 "pot", 
 "grade", 
 "photo", 
 "neck", 
 "sun", 
 "contribution", 
 "professional", 
 "monitor", 
 "procedure", 
 "association", 
 "relative", 
 "passion", 
 "letter", 
 "hit", 
 "owner", 
 "street", 
 "recipe", 
 "soft", 
 "client", 
 "swim", 
 "cousin", 
 "market", 
 "cry", 
 "beer", 
 "mistake", 
 "smoke", 
 "language", 
 "internal", 
 "home", 
 "manufacturer", 
 "lay", 
 "zone", 
 "past", 
 "camera", 
 "intention", 
 "tone", 
 "pie", 
 "force", 
 "shame", 
 "discussion", 
 "routine", 
 "sentence", 
 "access", 
 "comment", 
 "grand", 
 "other", 
 "effective", 
 "wood", 
 "area", 
 "day", 
 "savings", 
 "hour", 
 "heat", 
 "game", 
 "population", 
 "science", 
 "video", 
 "lady", 
 "worry", 
 "method", 
 "explanation", 
 "flight", 
 "staff", 
 "training", 
 "trouble", 
 "possibility", 
 "rest", 
 "common", 
 "cream", 
 "fan", 
 "independent", 
 "rip", 
 "possible", 
 "recommendation", 
 "vast", 
 "accident", 
 "shot", 
 "concern", 
 "play", 
 "sand", 
 "resort", 
 "spite", 
 "head", 
 "abuse", 
 "bill", 
 "quality", 
 "dress", 
 "collection", 
 "advance", 
 "detail", 
 "east", 
 "pizza", 
 "sing", 
 "concentrate", 
 "body", 
 "pass", 
 "medicine", 
 "criticism", 
 "local", 
 "cancel", 
 "apple", 
 "mode", 
 "beyond", 
 "whereas", 
 "driver", 
 "horse", 
 "finance", 
 "appointment", 
 "park", 
 "key", 
 "shoulder", 
 "eat", 
 "beat", 
 "foot", 
 "boot", 
 "brave", 
 "rent", 
 "you", 
 "revenue", 
 "curve", 
 "reward", 
 "sky", 
 "impact", 
 "efficiency", 
 "chain", 
 "board", 
 "ideal", 
 "rain", 
 "image", 
 "share", 
 "illegal", 
 "analyst", 
 "go", 
 "tour", 
 "strike", 
 "bank", 
 "way", 
 "guy", 
 "save", 
 "formal", 
 "sick", 
 "response", 
 "entry", 
 "salt", 
 "incident", 
 "vegetable", 
 "reflection", 
 "dear", 
 "host", 
 "level", 
 "district", 
 "warning", 
 "addition", 
 "row", 
 "middle", 
 "difficulty", 
 "anxiety", 
 "club", 
 "supermarket", 
 "hope", 
 "show", 
 "register", 
 "officer", 
 "test", 
 "sign", 
 "rub", 
 "novel", 
 "garbage", 
 "tonight", 
 "consequence", 
 "gap", 
 "comfortable", 
 "environment", 
 "tension", 
 "psychology", 
 "surround", 
 "bottom", 
 "sail", 
 "original", 
 "ratio", 
 "base", 
 "range", 
 "duty", 
 "target", 
 "match", 
 "salad", 
 "answer", 
 "understanding", 
 "individual", 
 "storm", 
 "balance", 
 "recording", 
 "school", 
 "girlfriend", 
 "confidence", 
 "laugh", 
 "private", 
 "statement", 
 "hurry", 
 "hide", 
 "chance", 
 "breakfast", 
 "corner", 
 "script", 
 "give", 
 "cloud", 
 "fat", 
 "membership", 
 "shape", 
 "contest", 
 "fold", 
 "prize", 
 "objective", 
 "equal", 
 "mouse", 
 "race", 
 "device", 
 "pen", 
 "courage", 
 "brother", 
 "uncle", 
 "quarter", 
 "toe", 
 "recognition", 
 "friend", 
 "candy", 
 "steal", 
 "card", 
 "resident", 
 "tongue", 
 "resist", 
 "activity", 
 "marketing", 
 "store", 
 "guide", 
 "bit", 
 "afternoon", 
 "date", 
 "agent", 
 "ordinary", 
 "bone", 
 "course", 
 "trust", 
 "point", 
 "spell", 
 "back", 
 "visual", 
 "low", 
 "drop", 
 "spend", 
 "police", 
 "shirt", 
 "season", 
 "ring", 
 "employer", 
 "red", 
 "dark", 
 "extent", 
 "figure", 
 "yesterday", 
 "final", 
 "crazy", 
 "box", 
 "piano", 
 "weather", 
 "reputation", 
 "satisfaction", 
 "function", 
 "reception", 
 "brush", 
 "painting", 
 "apartment", 
 "soup", 
 "cash", 
 "sleep", 
 "service", 
 "attitude", 
 "campaign", 
 "church", 
 "support", 
 "height", 
 "summer", 
 "sad", 
 "struggle", 
 "somewhere", 
 "mind", 
 "chemistry", 
 "farmer", 
 "cover", 
 "tree", 
 "bite", 
 "purchase", 
 "phrase", 
 "risk", 
 "woman", 
 "inevitable", 
 "wish", 
 "address", 
 "main", 
 "dinner", 
 "drama", 
 "shoot", 
 "gate", 
 "award", 
 "field", 
 "presence", 
 "gain", 
 "bat", 
 "wrap", 
 "tax", 
 "draft", 
 "judge", 
 "reserve", 
 "equivalent", 
 "challenge", 
 "nose", 
 "pipe", 
 "wall", 
 "piece", 
 "implement", 
 "touch", 
 "player", 
 "town", 
 "specific", 
 "wife", 
 "feel", 
 "skirt", 
 "animal", 
 "purpose", 
 "lock", 
 "daughter", 
 "budget", 
 "living", 
 "limit", 
 "priest", 
 "chapter", 
 "nature", 
 "pay", 
 "coach", 
 "blank", 
 "female", 
 "join", 
 "phase", 
 "scale", 
 "stay", 
 "series", 
 "unit", 
 "kick", 
 "cigarette", 
 "will", 
 "description", 
 "specialist", 
 "mine", 
 "total", 
 "feed", 
 "bathroom", 
 "pause", 
 "impress", 
 "joint", 
 "airline", 
 "dance", 
 "weird", 
 "cake", 
 "decision", 
 "choice", 
 "press", 
 "interaction", 
 "change", 
 "few", 
 "burn", 
 "bus", 
 "craft", 
 "application", 
 "vehicle", 
 "leave", 
 "edge", 
 "copy", 
 "prompt", 
 "research", 
 "win", 
 "temporary", 
 "village", 
 "benefit", 
 "negative", 
 "dare", 
 "package", 
 "building", 
 "chart", 
 "link", 
 "rise", 
 "assistance", 
 "youth", 
 "quote", 
 "act", 
 "wait", 
 "fishing", 
 "exercise", 
 "closet", 
 "brilliant", 
 "thought", 
 "brick", 
 "read", 
 "constant", 
 "rock", 
 "usual", 
 "stress", 
 "square", 
 "twist", 
 "flower", 
 "lack", 
 "combination", 
 "make", 
 "bath", 
 "rope", 
 "shower", 
 "bench", 
 "surgery", 
 "blow", 
 "paint", 
 "topic", 
 "sugar", 
 "assistant", 
 "family", 
 "hat", 
 "collar", 
 "hall", 
 "band", 
 "security", 
 "sir", 
 "ice", 
 "television", 
 "coffee", 
 "philosophy", 
 "major", 
 "expression", 
 "dog", 
 "issue", 
 "bicycle", 
 "rice", 
 "solution", 
 "music", 
 "passenger", 
 "joke", 
 "dish", 
 "stretch", 
 "data", 
 "leather", 
 "shoe", 
 "feeling", 
 "worth", 
 "section", 
 "escape", 
 "sympathy", 
 "dream", 
 "customer", 
 "report", 
 "dependent", 
 "food", 
 "hell", 
 "sample", 
 "eye", 
 "task", 
 "article", 
 "condition", 
 "display", 
 "model", 
 "royal", 
 "direction", 
 "people", 
 "air", 
 "speed", 
 "opening", 
 "side", 
 "arm", 
 "county", 
 "economics", 
 "education", 
 "landscape", 
 "length", 
 "road", 
 "wind", 
 "highlight", 
 "schedule", 
 "doctor", 
 "miss", 
 "chemical", 
 "department", 
 "grandmother", 
 "blood", 
 "politics", 
 "sock", 
 "minute", 
 "draw", 
 "welcome", 
 "life", 
 "disease", 
 "command", 
 "affect", 
 "protection", 
 "airport", 
 "lab", 
 "start", 
 "number", 
 "finger", 
 "thing", 
 "move", 
 "signal", 
 "law", 
 "emergency", 
 "connection", 
 "idea", 
 "chocolate", 
 "goal", 
 "heavy", 
 "stroke", 
 "classroom", 
 "dirt", 
 "name", 
 "parent", 
 "commercial", 
 "pair", 
 "mood", 
 "steak", 
 "nasty", 
 "metal", 
 "disk", 
 "meet", 
 "performance", 
 "initial", 
 "republic", 
 "nation", 
 "perspective", 
 "jury", 
 "average", 
 "check", 
 "history"
];

const keyboard = [
  ["Q", "W", "E", "R", "T", "Y", "U", "I", "O", "P"],
  ["A", "S", "D", "F", "G", "H", "J", "K", "L"],
  ["Z", "X", "C", "V", "B", "N", "M"]
];

let chosenWord = "";
let lettersGuessed = [];
let streakCount = 1;

window.onload = function () {
  displayInstructionsPopup();
  setupGame();
  document.getElementById("instruct").addEventListener("click", displayInstructionsPopup);
  document.addEventListener("keydown", handleKeyDown);
};

function displayInstructionsPopup() {
  const popupContainer = document.createElement("div");
  popupContainer.className = "popup-container";

  const popup = document.createElement("div");
  popup.className = "popup";

  const popupContent = document.createElement("div");
  popupContent.className = "popup-content";

  const popupClose = document.createElement("span");
  popupClose.className = "popup-close";
  popupClose.innerHTML = "&times;";
  popupClose.addEventListener("click", () => {
    popupContainer.remove();
  });

  const popupTitle = document.createElement("h2");
  popupTitle.innerText = "Instructions";

  const popupMessage = document.createElement("p");
  popupMessage.innerText =
    "Guess letters by clicking on the onscreen keyboard.\n\nCorrect guesses flip the cards, revealing letters to help you guess the word.\n\nIncorrect guesses bring you closer to losing. Watch out for red tiles.\n\nFlip all the cards and guess the word before all the letters of 'HORSE' turn red to win.\n\nTrack your streak and aim for a high score.";

  popupContent.appendChild(popupClose);
  popupContent.appendChild(popupTitle);
  popupContent.appendChild(popupMessage);

  popup.appendChild(popupContent);
  popupContainer.appendChild(popup);
  document.body.appendChild(popupContainer);

  document.addEventListener("keydown", function (event) {
    if (event.key === "Enter" && document.querySelector(".popup-container")) {
      event.preventDefault();
      popupContainer.remove();
    }
  });
}

function setupGame() {
  chosenWord = WORDS[Math.floor(Math.random() * WORDS.length)];
  setupWord();
  setupKeyboard();
  resetTargetWord();
}

function setupWord() {
  const wordContainer = document.getElementById("word-container");
  wordContainer.innerHTML = "";
  for (let i = 0; i < chosenWord.length; i++) {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <div class="face front"></div>
      <div class="face back">${chosenWord[i].toUpperCase()}</div>
    `;
    const cardContainer = document.createElement("div");
    cardContainer.appendChild(card);
    wordContainer.appendChild(cardContainer);
  }
}


function setupKeyboard() {
  for (let i = 0; i < keyboard.length; i++) {
    const rowContainer = document.getElementById("row-" + (i + 1));
    rowContainer.innerHTML = "";
    for (let j = 0; j < keyboard[i].length; j++) {
      const letterButton = document.createElement("button");
      letterButton.innerText = keyboard[i][j];
      letterButton.dataset.letter = keyboard[i][j];
      letterButton.addEventListener("click", guessLetter);
      letterButton.addEventListener("touchstart", handleTouchStart, { passive: true });
      letterButton.addEventListener("touchend", handleTouchEnd);
      rowContainer.appendChild(letterButton);
    }
  }
}

let touchStartX = 0;
let touchStartY = 0;

function handleTouchStart(event) {
  const touch = event.changedTouches[0];
  touchStartX = touch.clientX;
  touchStartY = touch.clientY;
}

function handleTouchEnd(event) {
  const touch = event.changedTouches[0];
  const touchEndX = touch.clientX;
  const touchEndY = touch.clientY;
  const touchDistanceThreshold = 10; // Adjust this value to control the touch sensitivity

  if (
    Math.abs(touchEndX - touchStartX) < touchDistanceThreshold &&
    Math.abs(touchEndY - touchStartY) < touchDistanceThreshold
  ) {
    // Handle the touch event as a click
    event.preventDefault();
    guessLetter(event);
  }
}

function guessLetter(event) {
  const letter = event.target.innerText.toLowerCase();
  event.target.disabled = true;
  handleGuess(letter);
}

function handleKeyDown(event) {
  const letter = event.key.toUpperCase();
  if (isLetter(letter)) {
    const letterButton = document.querySelector(
      `#keyboard-container button[data-letter="${letter}"]:not([disabled])`
    );
    if (letterButton) {
      letterButton.click();
    }
  }
}

function isLetter(str) {
  return str.length === 1 && str.match(/[a-z]/i);
}

function handleGuess(letter) {
  if (chosenWord.includes(letter)) {
    const wordContainer = document.getElementById("word-container");
    const wordCards = wordContainer.getElementsByClassName("card");

    for (let i = 0; i < chosenWord.length; i++) {
      if (chosenWord[i] === letter) {
        wordCards[i].classList.add("flipped");
        lettersGuessed.push(letter);
      }
    }

    updateOnscreenKeys();
  } else {
    lettersGuessed.push(letter);
    updateOnscreenKeys();

    const targetWordContainer = document.getElementById("target-word");
    const targetWordTiles = targetWordContainer.getElementsByClassName(
      "target-tile"
    );
    const incorrectGuesses = lettersGuessed.filter(
      (guess) => !chosenWord.includes(guess)
    ).length;

    if (incorrectGuesses <= targetWordTiles.length) {
      targetWordTiles[incorrectGuesses - 1].classList.add("red");
      targetWordTiles[incorrectGuesses - 1].classList.add("flipped");
    }

    const redTiles = document.querySelectorAll(".target-tile.red");
    if (redTiles.length === targetWordTiles.length) {
      displayPopup("Sorry, you lost!", chosenWord);
      resetStreak();
    }
  }

  const flippedCards = document.querySelectorAll(".card.flipped");
  if (flippedCards.length === chosenWord.length) {
    displayPopup("Congratulations, you won!");
    updateStreakCount();
  }
}

function updateOnscreenKeys() {
  const letterButtons = document.querySelectorAll("#keyboard-container button");
  letterButtons.forEach((button) => {
    const letter = button.dataset.letter.toLowerCase();
    if (lettersGuessed.includes(letter)) {
      if (chosenWord.includes(letter)) {
        button.classList.add("correct");
      } else {
        button.classList.add("incorrect");
      }
    }
  });
}

function displayPopup(message, lostWord = "") {
  const popupContainer = document.createElement("div");
  popupContainer.className = "popup-container";

  const popup = document.createElement("div");
  popup.className = "popup";

  const popupContent = document.createElement("div");
  popupContent.className = "popup-content";

  const popupClose = document.createElement("span");
  popupClose.className = "popup-close";
  popupClose.innerHTML = "&times;";
  popupClose.addEventListener("click", () => {
    popupContainer.remove();
    resetGame();
  });

  const popupMessage = document.createElement("p");
  popupMessage.innerText = message;

  popupContent.appendChild(popupClose);
  popupContent.appendChild(popupMessage);

  if (lostWord) {
    const popupWord = document.createElement("div");
    popupWord.className = "popup-word";
    lostWord.split("").forEach((letter) => {
      const tile = document.createElement("div");
      tile.className = "word-tile";
      tile.innerText = letter.toUpperCase();
      popupWord.appendChild(tile);
    });
    popupContent.appendChild(popupWord);
  } else {
    const streakCountElement = document.createElement("p");
    streakCountElement.innerText = `Streak: ${streakCount}`;
    popupContent.appendChild(streakCountElement);
  }

  popup.appendChild(popupContent);
  popupContainer.appendChild(popup);
  document.body.appendChild(popupContainer);

  popup.appendChild(popupContent);
  popupContainer.appendChild(popup);
  document.body.appendChild(popupContainer);

  document.addEventListener("keydown", function (event) {
    if (event.key === "Enter" && document.querySelector(".popup-container")) {
      event.preventDefault();
      closePopup();
      resetGame();
    }
  });

  function closePopup() {
    const popupContainer = document.querySelector(".popup-container");
    popupContainer.remove();
  }
}

function resetGame() {
  setupGame();
  lettersGuessed = [];
  updateOnscreenKeys();
}

function resetTargetWord() {
  const targetWordTiles = document.querySelectorAll(
    "#target-word .target-tile"
  );
  targetWordTiles.forEach((tile) => {
    tile.classList.remove("red");
    tile.classList.remove("flipped");
  });
}

function updateStreakCount() {
  streakCount++;
  const streakContainer = document.getElementById("streak-container");
  streakContainer.innerText = `Streak: ${streakCount}`;
}

function resetStreak() {
  streakCount = 1;
  const streakContainer = document.getElementById("streak-container");
  streakContainer.innerText = `Streak: ${streakCount}`;
}

resetStreak();